name: Test
dist: focal
addons:
    apt:
        packages:
            - ffmpeg
            - git
            - git-lfs

language: python
python:
    - "3.6"      # current default Python on Travis CI
    - "3.7"
    - "3.8"

# command to install dependencies
install:
    - pip install codecov coverage
    - pip install prometheus-client

# command to run tests
script:
    - tests/runtests.sh
after_success:
    - coverage run -m unittest discover -s tests
    - coverage xml
    - codecov
